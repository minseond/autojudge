## C 코드 구조 및 작동 방식

`AutoJudge` 시스템의 핵심 기능은 `main.c` 파일에 구현되어 있습니다. 이 파일은 프로그램의 실행 흐름을 제어하고, 사용자 입력에 따라 적절한 함수를 호출합니다. 각 함수의 주요 작동 방식은 다음과 같습니다:

# AutoJudge 시스템

AutoJudge 시스템은 C 프로그램을 컴파일하고, 정의된 테스트 케이스를 실행하여 출력 결과를 기대 결과와 비교하는 간단한 C 프로그램 테스트 유틸리티입니다. 다양한 입력 조건 하에서 프로그램의 정확성을 빠르게 평가하는 데 도움을 줍니다.

## 주요 기능

- GCC 컴파일러를 사용하여 C 프로그램 컴파일
- 오류 탐지를 위한 주소 산출기(Address sanitizer) 사용
- 사전 정의된 테스트 케이스 실행 및 예상 결과와의 비교
- 두 가지 테스트 예제를 자동으로 실행 및 검증
- 터미널에서 색상 있는 출력을 사용하여 결과를 보다 명확하게 표시

### 주요 함수 설명

- **`main()` 함수**:
  - 프로그램의 시작점으로, 사용자로부터 명령줄 인자를 받아들입니다.
  - `parse_command_line()` 함수를 호출하여 명령줄 인자를 분석하고, 각 인자를 적절한 변수에 저장합니다.
  - `compile_program()` 함수를 호출하여 사용자가 지정한 C 소스 파일을 컴파일합니다. 컴파일에 실패하면 오류 메시지를 출력하고 종료합니다.
  - `execute_tests()` 함수를 호출하여 정의된 모든 테스트 케이스를 실행하고 결과를 검증합니다.

- **`parse_command_line()` 함수**:
  - `getopt` 라이브러리를 사용하여 명령줄 옵션을 파싱합니다. 입력 디렉토리, 출력 디렉토리, 시간 제한 등의 정보를 추출합니다.
  - 추출한 정보는 `JudgeContext` 구조체에 저장되어 프로그램 전체에서 접근 가능합니다.

- **`compile_program()` 함수**:
  - GCC를 사용하여 주어진 C 소스 파일을 컴파일합니다.
  - 컴파일 과정에서 발생한 오류는 표준 오류로 리다이렉션되며, 오류 메시지를 분석하여 사용자에게 제공합니다.
  - 컴파일 성공 여부에 따라 해당 함수는 성공 또는 실패 상태를 반환합니다.

- **`execute_tests()` 함수**:
  - 입력 디렉토리 내의 모든 테스트 입력 파일을 순회합니다.
  - 각 파일에 대해 `run_test_case()` 함수를 호출하여 실제 테스트를 실행하고, 결과를 비교합니다.

- **`run_test_case()` 함수**:
  - 입력 파일로부터 데이터를 읽고 이를 테스트 프로그램의 입력으로 사용합니다.
  - 프로그램의 실행 결과는 임시 파일에 저장되고, 이 파일은 정답 파일과 비교됩니다.
  - 결과 비교는 `compare_output_with_answer()` 함수에 의해 수행됩니다.

- **`compare_output_with_answer()` 함수**:
  - 실행된 테스트 프로그램의 출력 파일과 정답 파일을 열고 내용을 비교합니다.
  - 파일의 각 줄을 비교하여 일치 여부를 판단하고, 최종적으로 테스트의 성공 또는 실패를 결정합니다.

## 사전 요구 사항

- GCC 컴파일러
- Make
- Unix 계열 환경

### 작업 흐름

1. 사용자는 `make` 명령을 통해 프로그램을 컴파일하고, `make example1` 또는 `make example2`를 사용하여 테스트 케이스를 실행합니다.
2. `main()` 함수가 실행되며, 사용자의 명령줄 인자를 처리하고, 프로그램을 컴파일하고, 테스트를 실행합니다.
3. 각 테스트 케이스는 입력, 실행, 출력 비교의 순서로 처리되며, 최종 결과는 사용자에게 보고됩니다.
